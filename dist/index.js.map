{"version":3,"sources":["../src/utils/isEnvBrowser.ts","../src/utils/debugger.ts","../src/utils/post.ts","../src/utils/lazyLoad.ts","../src/utils/sleep.ts","../src/utils/index.ts","../src/hooks/observe.hook.ts","../src/hooks/listen.hook.ts","../src/hooks/imageValidation.hook.ts","../src/hooks/sound.hook.ts"],"sourcesContent":["export const isEnvBrowser = (): boolean => !(window as any).invokeNative;\r\n","import type { DebuggerEventType } from \"@/interfaces/debugger.types.js\";\r\nimport { isEnvBrowser } from \"./isEnvBrowser.js\";\r\n\r\nexport class Debugger {\r\n  private events: DebuggerEventType[];\r\n  private timer: number = 1000;\r\n\r\n  constructor(events: DebuggerEventType[], timer?: number) {\r\n    this.events = events;\r\n    if (timer) {\r\n      this.timer = timer;\r\n    }\r\n    if (isEnvBrowser()) {\r\n      this.startProcessing();\r\n    }\r\n  }\r\n\r\n  private startProcessing(): void {\r\n    this.events.forEach((event) => {\r\n      setTimeout(() => {\r\n        this.handleEvent(event);\r\n      }, this.timer);\r\n    });\r\n  }\r\n\r\n  private handleEvent(event: DebuggerEventType): void {\r\n    console.log(\"Processing event:\", event);\r\n    setTimeout(() => {\r\n      window.dispatchEvent(\r\n        new MessageEvent(\"message\", {\r\n          data: { ...event },\r\n        })\r\n      );\r\n    });\r\n  }\r\n}\r\n","import { isEnvBrowser } from \"./isEnvBrowser.js\";\r\n\r\nexport class Post<T = unknown> {\r\n  private eventName: string;\r\n  private data?: unknown;\r\n  private mockData?: T;\r\n\r\n  private constructor(eventName: string, data?: unknown, mockData?: T) {\r\n    this.eventName = eventName;\r\n    this.data = data;\r\n    this.mockData = mockData;\r\n  }\r\n\r\n  public static async create<T>(\r\n    eventName: string,\r\n    data?: unknown,\r\n    mockData?: T\r\n  ): Promise<T> {\r\n    const instance = new Post(eventName, data, mockData);\r\n    return instance.execute();\r\n  }\r\n\r\n  private async execute(): Promise<T> {\r\n    const options = {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json; charset=UTF-8\",\r\n      },\r\n      body: JSON.stringify(this.data),\r\n    };\r\n\r\n    if (isEnvBrowser() && this.mockData) {\r\n      return this.mockData;\r\n    }\r\n\r\n    const resourceName = (window as any).GetParentResourceName\r\n      ? (window as any).GetParentResourceName()\r\n      : \"nui-frame-app\";\r\n\r\n    try {\r\n      const resp = await fetch(\r\n        `https://${resourceName}/${this.eventName}`,\r\n        options\r\n      );\r\n      const respFormatted = await resp.json();\r\n      return respFormatted;\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n","import { lazy } from \"react\";\r\n\r\nexport const lazyLoad = <T extends Record<string, any>, U extends keyof T>(\r\n  loader: (x?: string) => Promise<T>\r\n) =>\r\n  new Proxy({} as unknown as T, {\r\n    get: (_, componentName: string | symbol) => {\r\n      if (typeof componentName === \"string\") {\r\n        return lazy(() =>\r\n          loader().then((module) => ({\r\n            default: module[\r\n              componentName as U\r\n            ] as any as React.ComponentType<any>,\r\n          }))\r\n        );\r\n      }\r\n      return;\r\n    },\r\n  });\r\n","export const sleep = (delay: number) =>\r\n  new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(true);\r\n    }, delay);\r\n  });\r\n","export * from \"./debugger.js\";\r\nexport * from \"./post.js\";\r\nexport * from \"./isEnvBrowser.js\";\r\nexport * from \"./lazyLoad.js\";\r\nexport * from \"./sleep.js\";\r\nexport const noop = () => {};\r\n","import { type RefObject, useEffect, useRef } from \"react\";\r\n\r\nimport { isEnvBrowser, noop } from \"@/utils/index.js\";\r\nimport type { ObservedMessageType } from \"@/interfaces/observe.hook.types\";\r\n\r\ntype NuiHandlerSignature<T> = (data: T) => void;\r\n\r\nclass NuiListener<T> {\r\n  private action: string;\r\n  private savedHandler: RefObject<NuiHandlerSignature<T>>;\r\n\r\n  constructor(action: string, handler: NuiHandlerSignature<T>) {\r\n    this.action = action;\r\n    this.savedHandler = useRef<NuiHandlerSignature<T>>(noop);\r\n    this.setHandler(handler);\r\n  }\r\n\r\n  setHandler(handler: NuiHandlerSignature<T>) {\r\n    this.savedHandler.current = handler;\r\n  }\r\n\r\n  observe() {\r\n    const eventListener = (event: MessageEvent<ObservedMessageType<T>>) => {\r\n      const { action: eventAction, data } = event.data;\r\n      if (eventAction === this.action && this.savedHandler.current) {\r\n        if (isEnvBrowser()) {\r\n          console.log(\"Observed event:\", event);\r\n        }\r\n        this.savedHandler.current(data);\r\n      }\r\n    };\r\n    window.addEventListener(\"message\", eventListener);\r\n\r\n    return () => window.removeEventListener(\"message\", eventListener);\r\n  }\r\n}\r\n\r\nexport const useObserve = <T = unknown>(\r\n  action: string,\r\n  handler: (data: T) => void\r\n) => {\r\n  const listener = useRef(new NuiListener<T>(action, handler));\r\n\r\n  useEffect(() => {\r\n    listener.current.setHandler(handler);\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    return listener.current.observe();\r\n  }, [action]);\r\n};\r\n","import { type RefObject, useEffect, useRef } from \"react\";\r\n\r\ntype EventHandlerSignature<T = Event> = (event: T) => void;\r\n\r\nclass Listener<T extends Event = Event> {\r\n  private event: string;\r\n  private savedHandler: RefObject<EventHandlerSignature<T>>;\r\n\r\n  constructor(event: string, handler: EventHandlerSignature<T>) {\r\n    this.event = event;\r\n    this.savedHandler = useRef<EventHandlerSignature<T>>(handler);\r\n  }\r\n\r\n  setHandler(handler: EventHandlerSignature<T>) {\r\n    this.savedHandler.current = handler;\r\n  }\r\n\r\n  listen(target: EventTarget) {\r\n    const eventListener = (event: Event) => {\r\n      this.savedHandler.current(event as T);\r\n    };\r\n    target.addEventListener(this.event, eventListener);\r\n    return () => target.removeEventListener(this.event, eventListener);\r\n  }\r\n}\r\n\r\nexport const useListen = <T extends Event = Event>(\r\n  event: string,\r\n  handler: EventHandlerSignature<T>,\r\n  target: EventTarget = window\r\n) => {\r\n  const listener = useRef(new Listener<T>(event, handler));\r\n\r\n  useEffect(() => {\r\n    listener.current.setHandler(handler);\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    return listener.current.listen(target);\r\n  }, [event, target]);\r\n};\r\n","import { useEffect, useState } from \"react\";\r\n\r\nfunction isImgValid(url: string): Promise<boolean> {\r\n  const img = new Image();\r\n  img.src = url;\r\n  return new Promise((resolve) => {\r\n    img.onerror = () => resolve(false);\r\n    img.onload = () => resolve(true);\r\n  });\r\n}\r\n\r\nexport const useImageValidation = (imageUrl: string) => {\r\n  const [isImageValid, setIsImageValid] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const validateImage = async () => {\r\n      try {\r\n        const isValid = await isImgValid(imageUrl);\r\n        setIsImageValid(isValid);\r\n      } catch (error) {\r\n        console.error(\"Error validating image:\", error);\r\n        setIsImageValid(false);\r\n      }\r\n    };\r\n\r\n    validateImage();\r\n  }, [imageUrl]);\r\n\r\n  return { isImageValid, imageUrl };\r\n};\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nimport type { UseSoundOptionsInterface } from \"@/interfaces/sound.hook.types\";\r\n\r\nexport const useSound = (\r\n  src: string,\r\n  options: UseSoundOptionsInterface = {}\r\n) => {\r\n  const { volume = 1.0, loop = false } = options;\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    audioRef.current = new Audio(src);\r\n    audioRef.current.volume = volume;\r\n    audioRef.current.loop = loop;\r\n\r\n    return () => {\r\n      audioRef.current?.pause();\r\n      audioRef.current = null;\r\n    };\r\n  }, [src, volume, loop]);\r\n\r\n  const play = () => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = 0;\r\n      audioRef.current.play();\r\n      setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  const pause = () => {\r\n    if (audioRef.current) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(false);\r\n    }\r\n  };\r\n\r\n  return { play, pause, isPlaying };\r\n};\r\n"],"mappings":"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","names":["useEffect","useRef","useEffect","useEffect","useRef","useState"]}